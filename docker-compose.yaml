version: "3.3"

services:
  client:
    image: client:latest
    build: 
      context: .
      dockerfile: ./cmd/client/Dockerfile
    environment:
      - WEBSOCKET_URI=ws://websocket:8080
      - CLIENT_ID=client
    depends_on:
      - websocket

  websocket:
    image: websocket:latest
    build: 
      context: .
      dockerfile: ./cmd/websocket/Dockerfile
    ports:
      - "8080:8080"
    environment:
      - HTTP_PORT=8080

  proxy:
    image: proxy:latest
    build: 
      context: .
      dockerfile: ./cmd/proxy/Dockerfile
    ports:
      - "9090:9090"

  debug:
    image: mendhak/http-https-echo:17 
    ports:
      - "7070:80"

  hello:
    image: tutum/hello-world
    ports:
      - "3030:80"